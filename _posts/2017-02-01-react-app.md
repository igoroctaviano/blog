---
layout: post
title: "Desenvolvendo uma aplicação com React e Flux"
date: 2017-02-01 00:11:00
image: '/assets/img/react-app/main.png'
description: ''
main-class: ''
color: '#EB7728'
tags: js
categories:
introduction: ""
---

### Bom...

Uma parte dificil de se criar uma aplicação React é fazer a decisão de todas as bibilhotecas relacionadas 
que você vai utilizar para construir uma aplicação completa. Lembre-se, React é meramente uma camada visual 
em uma aplicação, React não tem opnião quanto a coisas como o fluxo de dados, routing, builds e deployments.

## Tecnologias
Bom, vamos caminhar para as tecnologias centrais que vamos utilizar para constrir a aplicação.

**Node**
Esse é o responsável em rodar JavaScript no server-side (servidor).

**Browserify**
Para expor esses pacotes node para o navegador.

**React**
Nossa biblhoteca de componentes.

**React/Router**
Pra lidar com client-side routing.

**Flux**
Para lidar com o fluxo de dados da nossa aplicação.

**Gulp**
Como nosso task runner (o cara que vai rodar nossas tarefas), juntando todas essas tecnologias em um script fácil de usar.

Essa é a stack de tecnologias que vamos explorar com um pouco mais de detalhe ao longo da construção.

### Node
Criar uma aplicação React e Flux não requer Node, mas com certeza, Node facilita bem o nosso trabalho.
Node roda JavaScript no servidor utilizando a engine V8 (rápida) da Google. Node agora inclui NPM (Node Package Manager)
no qual inclui milhares de bibliotécas úteis de JavaScript. Então vamos usar o NPM para puxar as bibliotecas que vamos precisar
no projeto. Se você nunca usou Node, não se preocupe. Vamos cobrir o básico que você precisa saber.

### NPM: Node's Package Manager
Como eu disse anteriomente, Node já vem empacotado com seu próprio gerenciador de pacotes chamado NPM. NPM é como
vamos instalar e gerênciar as dependências que precisamos para rodar nossa aplicação. Você provávelmente já
está familizarizado com o conceito de gerênciador de pacotes, mas em caso de ainda não estiver, são também gerênciador de pacotes: **NuGET** no mundo .NET, **RubyGems** em Ruby, **Maven** para Java, **PIP** para Python, **Pear** para PHP e frequentemente desenvolvedores front-end utilizam o **Bower** para gerênciar os pacotes relacionados a HTML, JavaScript e CSS.

Node utiliza um padrão CommonJS de JavaScript, para referênciar e expor modulos. Você pode estar familizarizado com
padrões de modulos alternativos como o Asyncronous Module Definition, também conhecido como AMD do RequireJS (carregador de módulos de JavaScript). O padrão CommonJS do Node serve o mesmo propósito genérico, que é encapsular o seu JavaScript
em um módulo reutilizável, no qual pode ser referenciado por outros módulos, simplemente uma sintaxe diferente. Resumindo, utilizando o padrão CommonJS, se identifica 3 partes principais:

% highlight js %
//1. Você referência qualquer módulo que quiser usar utilizando a função require.
var dependencia = require('/caminho/pro/arquivo');
% end highlight %

Você passa o caminho para o módulo que você quer importar, se o módulo está em sua pasta Node (no mesmo nível),
você não precisa especificar um caminho, já que o Node vai checar automaticamente. Se você já programou em Java,
isso é equivalente ao comando *import*, no caso de C#, seria igual ao comando *using*.

% highlight js %
//2. Vocẽ declara o módulo.
var meuModulo = {
  // código...
}
% end highlight %

Você escreve todo o seu código dentro desse módulo, entre os brackets.

% highlight js %
//3. Expõe para os outros.
module.exports = meuModulo;
% end highlight %

Finalmente você expõe o módulo que você acabou de definir, ao final. Agora todos podem utilizar o *require* para referênciar esse módulo que você acabou de criar. Vamos criar todos os arquivos desse tutorial utilizando o padrão CommonJS.

### Browserify
Há uma variedade enorme de padrões e ferramentas para gerênciar e empacotar dependências em JavaScript.
RequireJS é uma escolha popular, porém Browserify está se tornando popular porque ele empacota módulos Node,
para que você então os utilize no navegador. E isso é bem útil, porque NPM tem milhares de bibliotecas úteis e simplesmente
utilizando Browserify, você pode utilizar pacotes NPM facilmente no navegador. Agora, por default, Browserify empacota
todas as suas dependências em um único arquivo. Isso vem ser útil para minimizar o número de requisições HTTP que serão necessária para carregar sua aplicação web.

### React
Como uma biblioteca de componentes, vamos utilizar React. React é um projeto do Facebook que endireciona uma série de preocupações específicas como empacotamento, composição e renderização de componentes HTML. Por causa desse foco, React é leve e facilita a criação de UI's complexas, compondo vários componentes. Assim, React pode ser utilizado juntamente com outros frameworks como Angular e Backbone. React utiliza a Virtual DOM, o que faz React muito rápido. Basicamente, quando a UI muda, React compara o estado antigo com o novo na memória e então atualiza a DOM em uma maneira não dispendiosa. Isso salva recursos e faz React notavelmente rápido que outras opções hoje. Com o poder da Virtual DOM, React pode suportar renderização tanto no cliente quanto no servidor, e isso, é claro, é critico para a construção de Aplicações Isomórficas, o que separa ainda mais React de outras bibliotecas e frameworks que são mais orientadas a DOM como Angular e Knockout.

### React/Router
Como React é uma pequena engine com foco visual, React não tem opniões em como lidar com routing e para aplicações pequenas, você as vezes não tem a necessidade de um router completo, mas como o seu app cresce, você descobre que deve quebrar sua aplicação em várias paginas profundamente conectadas e é ai que a biblioteca React/Router vem a ser útil. Para uma aplicação de routing ou roteamento, React/Router oferece uma maneira simples de aninhamento de rotas. Você declara as rotas e a habilidade de aninhar rotas significa que você pode suportar UI's complexas que possuem alta complexidade de profundidade. React/Router é utilizado e suportado pelo Facebook. 

### Flux
Flux é uma biblioteca de flxo de dados unidirecional criada pelo Facebook para complementar o React. Flux é apenas uma marca para a implementaçã do Facebook de um padrão, que é o padrão de fluxo de dados unidirecional. Assim há uma variedade de alternativas por ai como Dolorean, Fluxor, etc. Vamos utilizar o Flux do Facebook basicamente pela sua popularidade. Flux evita o mais tradicional estilo de padrão MVC e em contra partida implementa fluxo de dados unidirecional. Isso tende a grandes aplicações a serem fáceis de compreender e analisar, evitando interações complexas que podem ocorrer entre multiplas view models no modelo tradicional.

### Gulp
Para amarrar tudo isso junto, vamos utilizar Gulp. Gulp é um executor de tarefas popular de JavaScript. Um popular competidor nos dias de hoje pela facilidade de configuração e rapidez. Gulp tem um ecossistema de plug-ins que nos permite facilmente automatizar todos os tipos de tarefas importantes como minificação, linting, empacotamento, movimentação de arquivos, execução de outras tarefas e observar arquivos, assim seu navegador pode recarregar quando você salvar suas tarefas. Gulp é rápido pois ele  stream-based, permitindo colar várias tarefas, conectando seus resultados e os utilizando para outras tarefas. Ele mantem todo esse trabalho em memória ao invés de escrever tudo no disco, o que o faz bem rápido também. (é por isso tambm que o Gulp ta ficando mais popular que o Grunt) Gulp pode executar vários tipos de tarefas, nosso foco principal com ele é observar os arquivos quanto a mudanças (plug-in), esse que vai automaticamente fazer o empacotamento de nosso código utilizando Browserify assim que mudanças são feitas. Finalmente, para clarificar, você não tem que utilizar Gulp, Browserify ou Node para criar uma aplicação em React / Flux. Mas como você vai ver, essas ferramentas vão lhe ajudar ao longo do caminho, fazendo o caminho bem mais fácil de percorrer.

### Nota
Algumas APIs podem quebrar devido as mudanças de versão das tecnologias. Para melhor seguir com o desenvolvimento dessa aplicação, recomendo instalar as seguintes versões: React 0.13.3, React-Router 0.13.3 e Flux 2.0.3. Assim que concluir o desenvolvimento, você pode seguir os logs de mudança no GitHub de cada um pra acompanhar o que foi alterado desde então.
